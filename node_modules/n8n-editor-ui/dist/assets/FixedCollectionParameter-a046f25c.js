import{e as h,a2 as P,h as R,_ as A}from"./n8n-91a817dd.js";import{g as C}from"./lodash-es-876af2e5.js";import{d as I,aD as S,b as p,o as l,f as n,e as m,w as f,l as j,t as B,k as r,M as y,a9 as b,c as d,g as k,aE as E,a4 as L}from"./vendor-c8bad0e4.js";import"./luxon-19e1de07.js";import"./esprima-next-8c7e8ff9.js";import"./@fortawesome/vue-fontawesome-6e8401ca.js";import"./@fortawesome/fontawesome-svg-core-984d6dde.js";const U=S(async()=>R(()=>import("./index-683d9781.js").then(e=>e.a5),["assets/index-683d9781.js","assets/vendor-c8bad0e4.js","assets/pinia-b59a3de7.js","assets/n8n-91a817dd.js","assets/luxon-19e1de07.js","assets/esprima-next-8c7e8ff9.js","assets/lodash-es-876af2e5.js","assets/@fortawesome/vue-fontawesome-6e8401ca.js","assets/@fortawesome/fontawesome-svg-core-984d6dde.js","assets/n8n-def62baf.css","assets/axios-706baf85.js","assets/flatted-8b14da7d.js","assets/vue-i18n-6b44b0b1.js","assets/dateformat-ce9c2f3c.js","assets/@jsplumb/browser-ui-70b0a0d6.js","assets/@jsplumb/core-0a463c13.js","assets/@jsplumb/util-98a92a84.js","assets/@jsplumb/common-fe415eb9.js","assets/@jsplumb/connector-bezier-53998944.js","assets/uuid-cf522c50.js","assets/@n8n/codemirror-lang-sql-9a304659.js","assets/codemirror-lang-n8n-expression-47e67c3a.js","assets/codemirror-lang-html-n8n-4223f8c7.js","assets/fast-json-stable-stringify-44009db8.js","assets/prettier-8be78f6f.js","assets/@vueuse/core-5943aedd.js","assets/timeago.js-a9e71aec.js","assets/file-saver-cc6d9044.js","assets/vue-json-pretty-cfc4ef1d.js","assets/humanize-duration-b7379348.js","assets/v3-infinite-loading-ff016886.js","assets/vue-agile-b5edbe38.js","assets/vue-agile-d964f598.css","assets/copy-to-clipboard-4501bff5.js","assets/vue3-touch-events-ee55ce04.js","assets/@fortawesome/free-solid-svg-icons-c96f0de9.js","assets/@fortawesome/free-regular-svg-icons-74cb85f8.js","assets/index-ac404141.css"])),F=I({name:"FixedCollectionParameter",props:{nodeValues:{type:Object,required:!0},parameter:{type:Object,required:!0},path:{type:String,required:!0},values:{type:Object,default:()=>({})},isReadOnly:{type:Boolean,default:!1}},components:{ParameterInputList:U},data(){return{selectedOption:void 0,mutableValues:{}}},watch:{values:{handler(e){this.mutableValues=h(e)},deep:!0}},created(){this.mutableValues=h(this.values)},computed:{getPlaceholderText(){const e=this.$locale.nodeText().placeholder(this.parameter,this.path);return e||this.$locale.baseText("fixedCollectionParameter.choose")},getProperties(){const e=[];let t;for(const o of this.propertyNames)t=this.getOptionProperties(o),t!==void 0&&e.push(t);return e},multipleValues(){var e;return!!((e=this.parameter.typeOptions)!=null&&e.multipleValues)},parameterOptions(){return this.multipleValues&&P(this.parameter.options)?this.parameter.options:this.parameter.options.filter(e=>!this.propertyNames.includes(e.name))},propertyNames(){return Object.keys(this.mutableValues||{})},sortable(){var e;return!!((e=this.parameter.typeOptions)!=null&&e.sortable)}},methods:{deleteOption(e,t){const o=this.mutableValues[e];!o||o.length>1?this.$emit("valueChanged",{name:this.getPropertyPath(e,t),value:void 0}):this.$emit("valueChanged",{name:this.getPropertyPath(e),value:void 0})},getPropertyPath(e,t){return`${this.path}.${e}`+(t!==void 0?`[${t}]`:"")},getOptionProperties(e){if(P(this.parameter.options)){for(const t of this.parameter.options)if(t.name===e)return t}},moveOptionDown(e,t){Array.isArray(this.mutableValues[e])&&this.mutableValues[e].splice(t+1,0,this.mutableValues[e].splice(t,1)[0]);const o={name:this.getPropertyPath(e),value:this.mutableValues[e]};this.$emit("valueChanged",o)},moveOptionUp(e,t){var i;Array.isArray(this.mutableValues[e])&&((i=this.mutableValues)==null||i[e].splice(t-1,0,this.mutableValues[e].splice(t,1)[0]));const o={name:this.getPropertyPath(e),value:this.mutableValues[e]};this.$emit("valueChanged",o)},optionSelected(e){const t=this.getOptionProperties(e);if(t===void 0)return;const o=`${this.path}.${t.name}`,i={};for(const s of t.values)s.type==="fixedCollection"&&s.typeOptions!==void 0&&s.typeOptions.multipleValues===!0?i[s.name]={}:s.typeOptions!==void 0&&s.typeOptions.multipleValues===!0?(i[s.name]=C(this.nodeValues,`${this.path}.${s.name}`,[]),Array.isArray(s.default)?i[s.name].push(...h(s.default)):s.default!==""&&typeof s.default!="object"&&i[s.name].push(h(s.default))):i[s.name]=h(s.default);let c;this.multipleValues?(c=C(this.nodeValues,o,[]),c.push(i)):c=i;const V={name:o,value:c};this.$emit("valueChanged",V),this.selectedOption=void 0},valueChanged(e){this.$emit("valueChanged",e)}}});const q={key:0,class:"no-items-exist"},z={key:1},M={class:"parameter-item-wrapper"},N={key:0,class:"delete-option"},K={key:0,class:"sort-icon"},G={key:2,class:"parameter-item"},H={class:"parameter-item-wrapper"},J={key:0,class:"delete-option"},Q={key:1},W={key:1,class:"add-option"};function X(e,t,o,i,c,V){const s=p("n8n-text"),$=p("n8n-input-label"),v=p("font-awesome-icon"),g=p("parameter-input-list"),_=p("n8n-button"),w=p("n8n-option"),T=p("n8n-select");return l(),n("div",{onKeydown:t[2]||(t[2]=L(()=>{},["stop"])),class:"fixed-collection-parameter"},[e.getProperties.length===0?(l(),n("div",q,[m(s,{size:"small"},{default:f(()=>[j(B(e.$locale.baseText("fixedCollectionParameter.currentlyNoItemsExist")),1)]),_:1})])):r("",!0),(l(!0),n(y,null,b(e.getProperties,a=>(l(),n("div",{key:a.name,class:"fixed-collection-parameter-property"},[a.displayName!==""&&e.parameter.options&&e.parameter.options.length!==1?(l(),d($,{key:0,label:e.$locale.nodeText().inputLabelDisplayName(a,e.path),underline:!0,size:"small",color:"text-dark"},null,8,["label"])):r("",!0),e.multipleValues?(l(),n("div",z,[(l(!0),n(y,null,b(e.mutableValues[a.name],(D,u)=>(l(),n("div",{key:a.name+u,class:"parameter-item"},[k("div",M,[e.isReadOnly?r("",!0):(l(),n("div",N,[m(v,{icon:"trash",class:"reset-icon clickable",title:e.$locale.baseText("fixedCollectionParameter.deleteItem"),onClick:O=>e.deleteOption(a.name,u)},null,8,["title","onClick"]),e.sortable?(l(),n("div",K,[u!==0?(l(),d(v,{key:0,icon:"angle-up",class:"clickable",title:e.$locale.baseText("fixedCollectionParameter.moveUp"),onClick:O=>e.moveOptionUp(a.name,u)},null,8,["title","onClick"])):r("",!0),u!==e.mutableValues[a.name].length-1?(l(),d(v,{key:1,icon:"angle-down",class:"clickable",title:e.$locale.baseText("fixedCollectionParameter.moveDown"),onClick:O=>e.moveOptionDown(a.name,u)},null,8,["title","onClick"])):r("",!0)])):r("",!0)])),(l(),d(E,null,{default:f(()=>[m(g,{parameters:a.values,nodeValues:e.nodeValues,path:e.getPropertyPath(a.name,u),hideDelete:!0,isReadOnly:e.isReadOnly,onValueChanged:e.valueChanged},null,8,["parameters","nodeValues","path","isReadOnly","onValueChanged"])]),_:2},1024))])]))),128))])):(l(),n("div",G,[k("div",H,[e.isReadOnly?r("",!0):(l(),n("div",J,[m(v,{icon:"trash",class:"reset-icon clickable",title:e.$locale.baseText("fixedCollectionParameter.deleteItem"),onClick:D=>e.deleteOption(a.name)},null,8,["title","onClick"])])),m(g,{parameters:a.values,nodeValues:e.nodeValues,path:e.getPropertyPath(a.name),isReadOnly:e.isReadOnly,class:"parameter-item",onValueChanged:e.valueChanged,hideDelete:!0},null,8,["parameters","nodeValues","path","isReadOnly","onValueChanged"])])]))]))),128)),e.parameterOptions.length>0&&!e.isReadOnly?(l(),n("div",Q,[e.parameter.options.length===1?(l(),d(_,{key:0,type:"tertiary",block:"",onClick:t[0]||(t[0]=a=>e.optionSelected(e.parameter.options[0].name)),label:e.getPlaceholderText},null,8,["label"])):(l(),n("div",W,[m(T,{modelValue:e.selectedOption,"onUpdate:modelValue":[t[1]||(t[1]=a=>e.selectedOption=a),e.optionSelected],placeholder:e.getPlaceholderText,size:"small",filterable:""},{default:f(()=>[(l(!0),n(y,null,b(e.parameterOptions,a=>(l(),d(w,{key:a.name,label:e.$locale.nodeText().collectionOptionDisplayName(e.parameter,a,e.path),value:a.name},null,8,["label","value"]))),128))]),_:1},8,["modelValue","placeholder","onUpdate:modelValue"])]))])):r("",!0)],32)}const se=A(F,[["render",X],["__scopeId","data-v-6c773ca7"]]);export{se as default};
//# sourceMappingURL=FixedCollectionParameter-a046f25c.js.map
